{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Win10\\\\Documents\\\\udemi-react\\\\14-react-portfolio-api\\\\src\\\\components\\\\Database\\\\ViewFactory.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"../Modal/Modal\";\nimport styles from \"./ViewFactory.module.css\";\nimport useHttp from \"./../../hooks/use-http\";\nimport { addToFavs, getDataInFavs } from \"../../lib/api\";\n\nconst ViewFactory = props => {\n  const [isAddedToFavs, setIsAddedToFavs] = useState(false);\n  const [alreadyExistsInFavs, setAlreadyExistsInFavs] = useState(false);\n  const {\n    sendRequest,\n    status,\n    error\n  } = useHttp(addToFavs); ///////////// get-keys ////////////////////\n\n  const {\n    sendRequest: getKeys,\n    status: getStatus,\n    error: getError,\n    data: loadedFavs\n  } = useHttp(getDataInFavs, true);\n  useEffect(() => {\n    if (props.dataViewFactory) {\n      getKeys();\n      console.log(\"sent\", getStatus);\n    }\n  }, [getKeys]);\n  let watch = [];\n\n  if (getStatus === \"pending\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 12\n      }\n    }, \"pending\");\n  }\n\n  if (getError) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"centered focused\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }\n    }, error);\n  }\n\n  if (getStatus === \"completed\" && loadedFavs) {\n    watch = Object.keys(loadedFavs);\n  }\n\n  if (status === \"completed\" && !loadedFavs) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"centered focused\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 12\n      }\n    }, \"No favs found!\");\n  }\n\n  if (watch.includes(props.dataViewFactory.DOTCode && !alreadyExistsInFavs)) {\n    setIsAddedToFavs(true);\n    setAlreadyExistsInFavs(true);\n  }\n\n  console.log(alreadyExistsInFavs); ///////////// END-get-keys ////////////////////\n\n  const HandleCloseModal = () => {\n    props.onCloseModal();\n  };\n\n  const addToFavsHandler = () => {\n    console.log(props.dataViewFactory);\n    sendRequest({\n      savedData: props.dataViewFactory,\n      id: props.dataViewFactory.DOTCode\n    });\n    setIsAddedToFavs(true);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.modalWindow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, !isAddedToFavs && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addToFavsHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, \"Add to favs\"), isAddedToFavs && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 27\n    }\n  }, \"Already Added\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.factoryInfo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.Name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.Country), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.City), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.Address), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.PostalCode), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.DOTCode), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, props.dataViewFactory.Status)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: HandleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Close\")));\n};\n\nexport default ViewFactory;","map":{"version":3,"sources":["C:/Users/Win10/Documents/udemi-react/14-react-portfolio-api/src/components/Database/ViewFactory.js"],"names":["React","useState","useEffect","Modal","styles","useHttp","addToFavs","getDataInFavs","ViewFactory","props","isAddedToFavs","setIsAddedToFavs","alreadyExistsInFavs","setAlreadyExistsInFavs","sendRequest","status","error","getKeys","getStatus","getError","data","loadedFavs","dataViewFactory","console","log","watch","Object","keys","includes","DOTCode","HandleCloseModal","onCloseModal","addToFavsHandler","savedData","id","modalWindow","factoryInfo","Name","Country","City","Address","PostalCode","Status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport styles from \"./ViewFactory.module.css\";\r\nimport useHttp from \"./../../hooks/use-http\";\r\nimport { addToFavs, getDataInFavs } from \"../../lib/api\";\r\n\r\nconst ViewFactory = (props) => {\r\n  const [isAddedToFavs, setIsAddedToFavs] = useState(false);\r\n  const [alreadyExistsInFavs, setAlreadyExistsInFavs] = useState(false);\r\n  const { sendRequest, status, error } = useHttp(addToFavs);\r\n\r\n  ///////////// get-keys ////////////////////\r\n  const {\r\n    sendRequest: getKeys,\r\n    status: getStatus,\r\n    error: getError,\r\n    data: loadedFavs,\r\n  } = useHttp(getDataInFavs, true);\r\n\r\n  useEffect(() => {\r\n    if (props.dataViewFactory) {\r\n      getKeys();\r\n      console.log(\"sent\", getStatus);\r\n    }\r\n  }, [getKeys]);\r\n\r\n  let watch = [];\r\n  if (getStatus === \"pending\") {\r\n    return <div>pending</div>;\r\n  }\r\n  if (getError) {\r\n    return <div className=\"centered focused\">{error}</div>;\r\n  }\r\n  if (getStatus === \"completed\" && loadedFavs) {\r\n    watch = Object.keys(loadedFavs);\r\n  }\r\n\r\n  if (status === \"completed\" && !loadedFavs) {\r\n    return <div className=\"centered focused\">No favs found!</div>;\r\n  }\r\n  if (watch.includes(props.dataViewFactory.DOTCode && !alreadyExistsInFavs)) {\r\n    setIsAddedToFavs(true);\r\n    setAlreadyExistsInFavs(true);\r\n  }\r\n  console.log(alreadyExistsInFavs);\r\n  ///////////// END-get-keys ////////////////////\r\n\r\n  const HandleCloseModal = () => {\r\n    props.onCloseModal();\r\n  };\r\n  const addToFavsHandler = () => {\r\n    console.log(props.dataViewFactory);\r\n    sendRequest({\r\n      savedData: props.dataViewFactory,\r\n      id: props.dataViewFactory.DOTCode,\r\n    });\r\n    setIsAddedToFavs(true);\r\n  };\r\n  return (\r\n    <Modal>\r\n      {\" \"}\r\n      <div className={styles.modalWindow}>\r\n        {!isAddedToFavs && (\r\n          <button onClick={addToFavsHandler}>Add to favs</button>\r\n        )}\r\n        {isAddedToFavs && <div>Already Added</div>}\r\n        <div className={styles.factoryInfo}>\r\n          <div>{props.dataViewFactory.Name}</div>\r\n          <div>{props.dataViewFactory.Country}</div>\r\n          <div>{props.dataViewFactory.City}</div>\r\n          <div>{props.dataViewFactory.Address}</div>\r\n          <div>{props.dataViewFactory.PostalCode}</div>\r\n          <div>{props.dataViewFactory.DOTCode}</div>\r\n          <div>{props.dataViewFactory.Status}</div>\r\n        </div>\r\n        <button onClick={HandleCloseModal}>Close</button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\nexport default ViewFactory;\r\n"]},"metadata":{},"sourceType":"module"}
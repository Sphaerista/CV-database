{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Win10\\\\Documents\\\\udemi-react\\\\14-react-portfolio-api\\\\src\\\\components\\\\Database\\\\FactorySearch.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport useHttp from \"../../hooks/use-http\";\nimport { fetchFactoryForDatabase } from \"../../lib/api\";\nimport styles from \"./FactorySearch.module.css\";\n\nconst sortList = (items, descending, sortType) => {\n  console.log(items, descending);\n  return items.sort((itemA, itemB) => {\n    if (sortType) {\n      if (descending) {\n        return itemA.Name < itemB.Name ? 1 : -1;\n      } else {\n        return itemA.Name > itemB.Name ? 1 : -1;\n      }\n    } else {\n      if (descending) {\n        return itemA.City < itemB.City ? 1 : -1;\n      } else {\n        return itemA.City > itemB.City ? 1 : -1;\n      }\n    }\n  });\n};\n\nconst FactorySearch = () => {\n  const [getEquipmentType, setGetEquipmentType] = useState(\"\");\n  const [getReportType, setGetReportType] = useState(\"\");\n  const [getYear, setGetYear] = useState(\"\");\n  const [specificCountryList, setSpecificCountryList] = useState([]);\n  const {\n    sendRequest,\n    status,\n    data,\n    error\n  } = useHttp(fetchFactoryForDatabase); //////////////// first-selection //////////////////////\n\n  const getEquipmentTypeHandler = e => {\n    e.preventDefault();\n    setGetEquipmentType(e.target.value);\n  };\n\n  const getReportTypeHandler = e => {\n    e.preventDefault();\n    setGetReportType(e.target.value);\n  };\n\n  const getYearHandler = e => {\n    e.preventDefault();\n    setGetYear(e.target.value);\n  };\n\n  const submitFactoryHandler = e => {\n    e.preventDefault();\n    sendRequest({\n      equipmentType: getEquipmentType,\n      reportType: getReportType,\n      year: getYear\n    });\n  }; //////////////// END-first-selection //////////////////////\n  //////////////// second-selection //////////////////////\n\n\n  let showFactoryByCountry = [];\n\n  const specificCountryHandler = e => {\n    let selectedCountry = e.target.value;\n    showFactoryByCountry = data.Results.filter(datacountry => {\n      var _datacountry$Country;\n\n      if (((_datacountry$Country = datacountry.Country) === null || _datacountry$Country === void 0 ? void 0 : _datacountry$Country.toLowerCase()) === selectedCountry) {\n        showFactoryByCountry.push(datacountry);\n        setSpecificCountryList(showFactoryByCountry);\n      }\n\n      if (selectedCountry === \"all\") {\n        setSpecificCountryList(data.Results);\n      }\n    });\n  };\n\n  let mapCountries = data === null || data === void 0 ? void 0 : data.Results.map(data => {\n    var _data$Country;\n\n    return (_data$Country = data.Country) === null || _data$Country === void 0 ? void 0 : _data$Country.toLowerCase();\n  });\n  let uniqueCountriesList = [...new Set(mapCountries)];\n  console.log(mapCountries, uniqueCountriesList.sort((a, b) => {\n    return a < b ? -1 : 1;\n  }));\n  let optionMapList = uniqueCountriesList.map(country => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: country,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 12\n      }\n    }, country);\n  });\n  console.log(specificCountryList); //////////////// END-second-selection //////////////////////\n  //////////////// sorting-selection //////////////////////\n\n  const [isNameSort, setIsNameSort] = useState(true);\n\n  const sortTypeHandler = e => {\n    if (e.target.htmlFor === \"name-sort\") {\n      setIsNameSort(true);\n    }\n\n    if (e.target.htmlFor === \"city-sort\") {\n      setIsNameSort(false);\n    }\n  };\n\n  const history = useHistory();\n  const location = useLocation();\n  const querParams = new URLSearchParams(location.search);\n  const isSortingAscending = querParams.get(\"sort\") === \"desc\";\n  const sortedList = sortList(specificCountryList, isSortingAscending, isNameSort);\n\n  const changeSortingHandler = () => {\n    history.push(\"database?sort=\" + (isSortingAscending ? \"asc\" : \"desc\"));\n  }; //////////////// END-sorting-selection //////////////////////\n  ///////////// final-third ///////////////////\n\n\n  let content = /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"No data\");\n\n  if (status === \"completed\" && data) {\n    // setSpecificCountryList(data.Results);\n    content = sortedList.map(data => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"focused\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, data.Name), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }\n      }, data.Country, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, data.City));\n    });\n  }\n\n  if (specificCountryList.length > 0) {\n    content = sortedList.map(data => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"focused\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }, data.Name), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }\n      }, data.Country, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, data.City));\n    });\n  } ///////////// END-final-third ///////////////////\n\n\n  useEffect(() => {}, [data, content]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, status), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitFactoryHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"cars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"Choose factory:\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: getEquipmentTypeHandler,\n    id: \"equipment\",\n    name: \"equipment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, \"Select Equipment\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, \"Tires\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, \"Brake Hoses\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"13\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, \"Glazing\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Retread\")), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: getReportTypeHandler,\n    id: \"cars\",\n    name: \"cars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, \"Select Report\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, \"New\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"updated\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, \"Updated\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"closed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, \"Closed\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, \"All\")), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: getYearHandler,\n    id: \"years\",\n    name: \"years\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, \"Select Year\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2012\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, \"2012\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2013\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, \"2013\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2014\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, \"2014\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2015\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, \"2015\")), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, \"Get a factory\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, \" \", data && `Amount of factories found: ${data.Count}`), data && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.checkbox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    name: \"sort\",\n    id: \"name-sort\",\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    onClick: sortTypeHandler,\n    htmlFor: \"name-sort\",\n    className: styles[\"form-control\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, \"Sort by Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    name: \"sort\",\n    id: \"city-sort\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    onClick: sortTypeHandler,\n    htmlFor: \"city-sort\",\n    className: styles[\"form-control\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, \"Sort by City\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: changeSortingHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, \"Sort \", isSortingAscending ? \"Asc...\" : \"Desc...\"), \" \"), data && /*#__PURE__*/React.createElement(\"select\", {\n    onChange: specificCountryHandler,\n    id: \"country\",\n    name: \"country\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \"--Select country--\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }, \"All countries\"), optionMapList)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, content));\n};\n\nexport default FactorySearch;","map":{"version":3,"sources":["C:/Users/Win10/Documents/udemi-react/14-react-portfolio-api/src/components/Database/FactorySearch.js"],"names":["React","useState","useEffect","useHistory","useLocation","useHttp","fetchFactoryForDatabase","styles","sortList","items","descending","sortType","console","log","sort","itemA","itemB","Name","City","FactorySearch","getEquipmentType","setGetEquipmentType","getReportType","setGetReportType","getYear","setGetYear","specificCountryList","setSpecificCountryList","sendRequest","status","data","error","getEquipmentTypeHandler","e","preventDefault","target","value","getReportTypeHandler","getYearHandler","submitFactoryHandler","equipmentType","reportType","year","showFactoryByCountry","specificCountryHandler","selectedCountry","Results","filter","datacountry","Country","toLowerCase","push","mapCountries","map","uniqueCountriesList","Set","a","b","optionMapList","country","isNameSort","setIsNameSort","sortTypeHandler","htmlFor","history","location","querParams","URLSearchParams","search","isSortingAscending","get","sortedList","changeSortingHandler","content","length","Count","checkbox"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport { fetchFactoryForDatabase } from \"../../lib/api\";\r\nimport styles from \"./FactorySearch.module.css\";\r\n\r\nconst sortList = (items, descending, sortType) => {\r\n  console.log(items, descending);\r\n  return items.sort((itemA, itemB) => {\r\n    if (sortType) {\r\n      if (descending) {\r\n        return itemA.Name < itemB.Name ? 1 : -1;\r\n      } else {\r\n        return itemA.Name > itemB.Name ? 1 : -1;\r\n      }\r\n    } else {\r\n      if (descending) {\r\n        return itemA.City < itemB.City ? 1 : -1;\r\n      } else {\r\n        return itemA.City > itemB.City ? 1 : -1;\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nconst FactorySearch = () => {\r\n  const [getEquipmentType, setGetEquipmentType] = useState(\"\");\r\n  const [getReportType, setGetReportType] = useState(\"\");\r\n  const [getYear, setGetYear] = useState(\"\");\r\n  const [specificCountryList, setSpecificCountryList] = useState([]);\r\n  const { sendRequest, status, data, error } = useHttp(fetchFactoryForDatabase);\r\n\r\n  //////////////// first-selection //////////////////////\r\n  const getEquipmentTypeHandler = (e) => {\r\n    e.preventDefault();\r\n    setGetEquipmentType(e.target.value);\r\n  };\r\n  const getReportTypeHandler = (e) => {\r\n    e.preventDefault();\r\n    setGetReportType(e.target.value);\r\n  };\r\n  const getYearHandler = (e) => {\r\n    e.preventDefault();\r\n    setGetYear(e.target.value);\r\n  };\r\n\r\n  const submitFactoryHandler = (e) => {\r\n    e.preventDefault();\r\n    sendRequest({\r\n      equipmentType: getEquipmentType,\r\n      reportType: getReportType,\r\n      year: getYear,\r\n    });\r\n  };\r\n  //////////////// END-first-selection //////////////////////\r\n\r\n  //////////////// second-selection //////////////////////\r\n  let showFactoryByCountry = [];\r\n  const specificCountryHandler = (e) => {\r\n    let selectedCountry = e.target.value;\r\n    showFactoryByCountry = data.Results.filter((datacountry) => {\r\n      if (datacountry.Country?.toLowerCase() === selectedCountry) {\r\n        showFactoryByCountry.push(datacountry);\r\n        setSpecificCountryList(showFactoryByCountry);\r\n      }\r\n      if (selectedCountry === \"all\") {\r\n        setSpecificCountryList(data.Results);\r\n      }\r\n    });\r\n  };\r\n\r\n  let mapCountries = data?.Results.map((data) => {\r\n    return data.Country?.toLowerCase();\r\n  });\r\n\r\n  let uniqueCountriesList = [...new Set(mapCountries)];\r\n  console.log(\r\n    mapCountries,\r\n    uniqueCountriesList.sort((a, b) => {\r\n      return a < b ? -1 : 1;\r\n    })\r\n  );\r\n  let optionMapList = uniqueCountriesList.map((country) => {\r\n    return <option value={country}>{country}</option>;\r\n  });\r\n\r\n  console.log(specificCountryList);\r\n  //////////////// END-second-selection //////////////////////\r\n\r\n  //////////////// sorting-selection //////////////////////\r\n  const [isNameSort, setIsNameSort] = useState(true);\r\n  const sortTypeHandler = (e) => {\r\n    if (e.target.htmlFor === \"name-sort\") {\r\n      setIsNameSort(true);\r\n    }\r\n    if (e.target.htmlFor === \"city-sort\") {\r\n      setIsNameSort(false);\r\n    }\r\n  };\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const querParams = new URLSearchParams(location.search);\r\n  const isSortingAscending = querParams.get(\"sort\") === \"desc\";\r\n  const sortedList = sortList(\r\n    specificCountryList,\r\n    isSortingAscending,\r\n    isNameSort\r\n  );\r\n\r\n  const changeSortingHandler = () => {\r\n    history.push(\"database?sort=\" + (isSortingAscending ? \"asc\" : \"desc\"));\r\n  };\r\n  //////////////// END-sorting-selection //////////////////////\r\n\r\n  ///////////// final-third ///////////////////\r\n  let content = <p>No data</p>;\r\n  if (status === \"completed\" && data) {\r\n    // setSpecificCountryList(data.Results);\r\n    content = sortedList.map((data) => {\r\n      return (\r\n        <>\r\n          <div className=\"focused\">{data.Name}</div>\r\n          <span>{data.Country} </span>\r\n          <span>{data.City}</span>\r\n        </>\r\n      );\r\n    });\r\n  }\r\n  if (specificCountryList.length > 0) {\r\n    content = sortedList.map((data) => {\r\n      return (\r\n        <>\r\n          <div className=\"focused\">{data.Name}</div>\r\n          <span>{data.Country} </span>\r\n          <span>{data.City}</span>\r\n        </>\r\n      );\r\n    });\r\n  }\r\n  ///////////// END-final-third ///////////////////\r\n\r\n  useEffect(() => {}, [data, content]);\r\n  return (\r\n    <>\r\n      <div>{status}</div>\r\n      <form onSubmit={submitFactoryHandler}>\r\n        <label htmlFor=\"cars\">Choose factory:</label>\r\n        <select\r\n          onChange={getEquipmentTypeHandler}\r\n          id=\"equipment\"\r\n          name=\"equipment\"\r\n        >\r\n          <option value=\"\">Select Equipment</option>\r\n          <option value=\"1\">Tires</option>\r\n          <option value=\"3\">Brake Hoses</option>\r\n          <option value=\"13\">Glazing</option>\r\n          <option value=\"16\">Retread</option>\r\n        </select>\r\n        <select onChange={getReportTypeHandler} id=\"cars\" name=\"cars\">\r\n          <option value=\"\">Select Report</option>\r\n          <option value=\"new\">New</option>\r\n          <option value=\"updated\">Updated</option>\r\n          <option value=\"closed\">Closed</option>\r\n          <option value=\"all\">All</option>\r\n        </select>\r\n        <select onChange={getYearHandler} id=\"years\" name=\"years\">\r\n          <option value=\"\">Select Year</option>\r\n          <option value=\"2012\">2012</option>\r\n          <option value=\"2013\">2013</option>\r\n          <option value=\"2014\">2014</option>\r\n          <option value=\"2015\">2015</option>\r\n        </select>\r\n        <button>Get a factory</button>\r\n      </form>\r\n\r\n      <div> {data && `Amount of factories found: ${data.Count}`}</div>\r\n\r\n      {data && (\r\n        <div>\r\n          <div className={styles.checkbox}>\r\n            <input type=\"radio\" name=\"sort\" id=\"name-sort\" defaultChecked />\r\n            <label\r\n              onClick={sortTypeHandler}\r\n              htmlFor=\"name-sort\"\r\n              className={styles[\"form-control\"]}\r\n            >\r\n              Sort by Name\r\n            </label>\r\n            <input type=\"radio\" name=\"sort\" id=\"city-sort\" />\r\n            <label\r\n              onClick={sortTypeHandler}\r\n              htmlFor=\"city-sort\"\r\n              className={styles[\"form-control\"]}\r\n            >\r\n              Sort by City\r\n            </label>\r\n            <button onClick={changeSortingHandler}>\r\n              Sort {isSortingAscending ? \"Asc...\" : \"Desc...\"}\r\n            </button>{\" \"}\r\n          </div>\r\n\r\n          {data && (\r\n            <select\r\n              onChange={specificCountryHandler}\r\n              id=\"country\"\r\n              name=\"country\"\r\n            >\r\n              <option value=\"\">--Select country--</option>\r\n              <option value=\"all\">All countries</option>\r\n              {optionMapList}\r\n            </select>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div>{content}</div>\r\n    </>\r\n  );\r\n};\r\nexport default FactorySearch;\r\n"]},"metadata":{},"sourceType":"module"}